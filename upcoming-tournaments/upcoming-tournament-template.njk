---
pagination:
  data: allUpcomingTournaments
  size: 1
  alias: tournament
  resolve: values
permalink: "/upcoming-tournaments/{{ tournament.slug }}/"
---

{% extends "layout.njk" %}

{# This sets a unique CSS class for the body tag for page-specific styling if needed #}
{% set bodyClass = "page-tournament-detail" %}

{# Block for unique page title and meta description for SEO #}
{% block title %}
{{ tournament.name }} | Details, Registration & Travel Info
{% endblock %}

{% block meta_description %}
  <meta name="description" content="Get full details for {{ tournament.name }} on {{ tournament.dates }}. See which top-ranked players are attending, venue information, and travel tips for {{ tournament.location }}.">
{% endblock %}

{# Block for Structured Data to improve search engine visibility #}
{% block head %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Event",
    "name": "{{ tournament.name }}",
    "startDate": "{{ tournament.startDate }}",
    "endDate": "{{ tournament.endDate }}",
    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
    "eventStatus": "https://schema.org/EventScheduled",
    "location": {
      "@type": "Place",
      "name": "{{ tournament.venueName or tournament.location }}",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "{{ tournament.location }}"
      }
    },
    "image": [
      "{{ site.url }}/images/events/{{ tournament.slug }}.png"
    ],
    "description": "{{ tournament.description or 'A premier fighting game tournament.' }}",
    "organizer": {
      "@type": "Organization",
      "name": "{{ tournament.organizer or 'FGC Top Players' }}",
      "url": "{{ tournament.url }}"
    }
  }
  </script>
{% endblock %}

{% block content %}
{% include "banner.njk" %}
<div class="content-container">

  {# The header content is wrapped in the sticky container #}
  <div class="event-header-group">
    <div class="header-sticky-container">
      <div class="event-header event-header--{{ tournament.tier | lower }}">
        <div class="event-image-container" style="--bg-image-url: url('/images/events/{{ tournament.slug }}.png');">
          <img src="/images/events/{{ tournament.slug }}.png" alt="Logo for {{ tournament.name }}">
        </div>
        <div class="event-header__details">
          <h1>{{ tournament.name }}</h1>
          <div class="event-header__meta">
            <span class="meta-item--date"><i class="fas fa-calendar-alt"></i> {{ tournament.dates }}</span>
            <span class="meta-item--location"><i class="fas fa-map-marker-alt"></i> {{ tournament.location }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <article style="line-height: 1.6;">

    <div class="section-banner">
      <h2>Tournament Overview</h2>
    </div>

    <div class="overview-meta overview-meta--{{ tournament.tier | lower }}">
      <div class="meta-grid">
        <div class="meta-column">
          <h3>Event Details</h3>
          <div class="meta-item">
            <i class="fas fa-trophy"></i>
            <div class="meta-item-content">
              <strong>Prize Pool</strong>
              <span>{{ tournament.prizes }}</span>
            </div>
          </div>
          <div class="meta-item">
            <i class="fas fa-landmark"></i>
            <div class="meta-item-content">
              <strong>Venue</strong>
              <span>{{ tournament.venueName or "To be announced" }}</span>
            </div>
          </div>
        </div>
        <div class="meta-column">
          <h3>Plan Your Trip</h3>
          <ul class="travel-links">
            <li>
              <a href="https://www.google.com/maps/search/{{ (tournament.venueName or '') + ' ' + tournament.location | url_encode }}" target="_blank" rel="noopener noreferrer">
                <i class="fas fa-map-marked-alt"></i> View Venue Map
              </a>
            </li>
            <li>
              <a href="https://www.google.com/flights?q=flights+to+{{ tournament.location | url_encode }}" target="_blank" rel="noopener noreferrer">
                <i class="fas fa-plane-departure"></i> Find Flights
              </a>
            </li>
            <li>
              <a href="https://www.google.com/search?q=hotels+near+{{ (tournament.venueName or '') + ' ' + tournament.location | url_encode }}" target="_blank" rel="noopener noreferrer">
                <i class="fas fa-bed"></i> Find Hotels
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="description-content">
        <h3>About the Event</h3>
        {{ tournament.description | nl2p | safe }}
      </div>

      {% if tournament.notablePlayers and tournament.notablePlayers.length > 0 %}
        <div class="notable-players-section">
          <div class="section-banner">
            <h2>Top Players to Watch</h2>
          </div>
          <p>
          
          <div class="notable-players-grid">
            {% for player_name in tournament.notablePlayers %}
              {% set player_data = rankings.players | find("Player", player_name) %}
              {% set rank = player_data.Rank | int if player_data else 0 %}
              {% set card_class = "" %}
              {% if rank >= 1 and rank <= 4 %}{% set card_class = "rank-" + rank %}{% endif %}
              {% if rank >= 5 and rank <= 40 %}{% set card_class = "ranked-6-40" %}{% endif %}
              {% set show_photo = player_data and rank > 0 and rank <= 40 and player_data['Player Icon'] %}

              {#
                This is the NEW, self-contained player card.
                It uses unique "np-" (Notable Player) class names to avoid all CSS conflicts.
              #}
              <div class="np-card {{ card_class }}">
                <div class="np-icon-wrapper">
                  {% if show_photo %}
                    <img src="{{ player_data['Player Icon'] }}" alt="{{ player_name }}" class="np-icon" onerror="this.style.display='none'">
                  {% else %}
                    <div class="np-icon-placeholder"><i class="fas fa-user"></i></div>
                  {% endif %}
                </div>
              
                <div class="np-content">
                  <span class="np-name">{{ player_name }}</span>
                  {% if rank > 0 and rank <= 40 %}
                    <span class="rank-badge np-rank">
                      #{{ rank }}
                    </span>
                  {% endif %}
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}

      <div class="cta-container">
        <a href="{{ tournament.url }}" class="btn btn--primary" target="_blank" rel="noopener noreferrer">
          <i class="fas fa-ticket-alt"></i> Register / Official Site
        </a>
      </div>
    </div>
  </article>

</div>
{% endblock %}